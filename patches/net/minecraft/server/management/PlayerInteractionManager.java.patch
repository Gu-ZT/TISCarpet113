--- a/net/minecraft/server/management/PlayerInteractionManager.java
+++ b/net/minecraft/server/management/PlayerInteractionManager.java
@@ -1,5 +1,8 @@
 package net.minecraft.server.management;
 
+import carpet.CarpetServer;
+import carpet.helpers.BlockRotator;
+import carpet.worldedit.FabricWorldEdit;
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockChest;
 import net.minecraft.block.BlockCommandBlock;
@@ -8,6 +11,7 @@
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.entity.player.EntityPlayer;
 import net.minecraft.entity.player.EntityPlayerMP;
+import net.minecraft.init.Blocks;
 import net.minecraft.inventory.IInventory;
 import net.minecraft.item.ItemStack;
 import net.minecraft.item.ItemUseContext;
@@ -241,6 +245,12 @@
         {
             iblockstate.getBlock().onPlayerDestroy(this.world, pos, iblockstate);
         }
+        //CM
+        if(flag)
+        {
+            CarpetServer.scriptServer.events.onBlockBroken(player, world, pos, iblockstate);
+        }
+        // end CM
 
         return flag;
     }
@@ -312,6 +322,14 @@
 
     public EnumActionResult processRightClick(EntityPlayer player, World worldIn, ItemStack stack, EnumHand hand)
     {
+        // CM worldedit
+        ActionResult<ItemStack> weResult = FabricWorldEdit.inst.onRightClickAir(player, worldIn, hand);
+        if (weResult.getType() != EnumActionResult.PASS)
+        {
+            return weResult.getType();
+        }
+        // CM worldedit ends
+
         if (this.gameType == GameType.SPECTATOR)
         {
             return EnumActionResult.PASS;
@@ -366,6 +384,14 @@
 
     public EnumActionResult processRightClickBlock(EntityPlayer player, World worldIn, ItemStack stack, EnumHand hand, BlockPos pos, EnumFacing facing, float hitX, float hitY, float hitZ)
     {
+        // CM worldedit
+        EnumActionResult weResult = FabricWorldEdit.inst.onRightClickBlock(player, worldIn, hand, facing, pos.getX() + hitX, pos.getY() + hitY, pos.getZ() + hitZ);
+        if (weResult != EnumActionResult.PASS)
+        {
+            return weResult;
+        }
+        // CM worldedit ends
+
         IBlockState iblockstate = worldIn.getBlockState(pos);
 
         if (this.gameType == GameType.SPECTATOR)
@@ -401,11 +427,20 @@
             boolean flag = !player.getHeldItemMainhand().isEmpty() || !player.getHeldItemOffhand().isEmpty();
             boolean flag1 = player.isSneaking() && flag;
 
-            if (!flag1 && iblockstate.onBlockActivated(worldIn, pos, player, hand, facing, hitX, hitY, hitZ))
+            if (!flag1)
             {
-                return EnumActionResult.SUCCESS;
+                //flip method will check for flippinCactus setting
+                Boolean flipped = BlockRotator.flipBlockWithCactus(worldIn, pos, iblockstate, player, hand, facing, hitX, hitY, hitZ);
+                if (flipped)
+                {
+                    return EnumActionResult.PASS;
+                }
+                if (iblockstate.onBlockActivated(worldIn, pos, player, hand, facing, hitX, hitY, hitZ))
+                {
+                    return EnumActionResult.SUCCESS;
+                }
             }
-            else if (!stack.isEmpty() && !player.getCooldownTracker().hasCooldown(stack.getItem()))
+            if (!stack.isEmpty() && !player.getCooldownTracker().hasCooldown(stack.getItem()))
             {
                 ItemUseContext itemusecontext = new ItemUseContext(player, player.getHeldItem(hand), pos, facing, hitX, hitY, hitZ);
 
